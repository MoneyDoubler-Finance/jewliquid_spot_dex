import{r as e,j as r,a4 as t,a5 as a,a6 as s,q as o,X as n,e as i,g as l,a7 as c,l as d,m as p,D as m,R as u}from"./chunk-DoOKHQUE.js";import{K as x,V as y}from"./chunk-DdBifORb.js";import{b as h}from"./chunk-C47o46mc.js";import{u as b,_ as f}from"./chunk-DdCQps-o.js";import{b as g}from"./chunk-CSdQdmDB.js";const v=()=>{try{const e=document.cookie.split("; ").find(e=>e.startsWith("tradingConfig="));if(e){const r=e.split("=")[1];return JSON.parse(decodeURIComponent(r))}return null}catch(e){return null}},j=()=>window.tradingServerUrl?.replace(/\/+$/,"")||"",N=e=>Math.floor(1e9*e).toString(),w=(e,r)=>{const t=parseFloat(e);return parseFloat(r)/t},k=e=>{const r=new Map;return e.forEach((e,t)=>{try{const t=h.decode(e.privateKey),a=x.fromSecretKey(t);r.set(e.address,a),r.set(a.publicKey.toBase58(),a)}catch(a){}}),r},S=async(e,r)=>{try{const t=((e,r)=>e.transactions&&Array.isArray(e.transactions)?0===r.size?{transactions:[]}:{transactions:e.transactions.map((e,t)=>{try{let t;try{t=h.decode(e)}catch{t=new Uint8Array(Buffer.from(e,"base64"))}const a=y.deserialize(t),s=[];return a.message.staticAccountKeys.forEach(e=>{const t=e.toBase58(),a=r.get(t);a&&!s.some(e=>e.publicKey.equals(a.publicKey))&&s.push(a)}),0===s.length?e:(a.sign(s),h.encode(a.serialize()))}catch(a){return e}})}:{transactions:[]})(e,r);if(0===t.transactions.length)return{success:!1,error:"Failed to sign any transactions in the bundle"};const a=await(async e=>{try{const r=j();if(!r)return{success:!1,error:"Trading server URL not configured"};const t=await fetch(`${r}/api/transactions/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactions:e})});if(!t.ok){const e=await t.text();return{success:!1,error:`HTTP ${t.status}: ${e}`}}return await t.json()}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}})(t.transactions);return a.success&&e.orders.forEach((e,r)=>{}),a}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}},E=async(e,r)=>{try{if(!e.success||!e.orders||!e.transactions)return{success:!1,error:"Invalid limit order response format"};const t={orders:e.orders,transactions:e.transactions,errors:e.errors||[]},a=await(async(e,r)=>{try{const t=k(r);return await S(e,t)}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}})(t,r);return a.success,a}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}},C=async(e,r)=>{try{const t=await(async e=>{try{const r=v(),t={...e,computeUnitPrice:e.computeUnitPrice||"auto",rpcUrl:e.rpcUrl||r?.rpcEndpoint,includeTip:e.includeTip??!0,jitoTipLamports:e.jitoTipLamports??(r?.transactionFee?Math.floor(1e9*parseFloat(r.transactionFee)):5e6),authenticated:e.authenticated??!1},a=j(),s=await fetch(`${a}/limit/cancel`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),o=await s.json();return s.ok?o:{success:!1,error:o.error||`HTTP ${s.status}: ${s.statusText}`}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}})(e);return t.success?await(async(e,r)=>{try{if(!e.success||!e.transaction)return{success:!1,error:"Invalid cancel order response format"};let a=e.transaction;try{h.decode(e.transaction)}catch{try{const r=new Uint8Array(Buffer.from(e.transaction,"base64"));a=h.encode(r)}catch(t){return{success:!1,error:"Failed to convert transaction encoding from base64 to base58"}}}const s=k([r]);if(0===s.size)return{success:!1,error:"Failed to create wallet keypair"};const o={orders:[],transactions:[a],errors:[]},n=await S(o,s);return n.success,n}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}})(t,r):{success:!1,error:t.error||"Failed to get cancel transaction"}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}},F=({value:t,onExecute:a,onChange:o,isLoading:n,variant:i="buy",isEditMode:l,index:c})=>{const[d,p]=e.useState(t),m=e.useRef(null);e.useEffect(()=>{p(t)},[t]),e.useEffect(()=>{l&&m.current&&m.current?.focus()},[l]);const u=e=>{if("Enter"===e.key){const e=parseFloat(d);!isNaN(e)&&e>0&&o(e.toString())}else"Escape"===e.key&&p(t)},x=()=>{const e=parseFloat(d);!isNaN(e)&&e>0?o(e.toString()):p(t)};return l?r.jsx("div",{className:"relative",children:r.jsx("input",{ref:m,type:"text",value:d,onChange:e=>p(e.target.value.replace(/[^0-9.]/g,"")),onKeyDown:u,onBlur:x,className:"w-full h-8 px-2 text-xs font-mono rounded border text-center\n                   bg-app-primary text-app-primary border-app-primary-color\n                   focus:outline-none focus:ring-1 focus:ring-app-primary-40"})}):r.jsx("button",{onClick:()=>a(t),disabled:n,className:"relative group px-2 py-1.5 text-xs font-mono rounded border transition-all duration-200\n                min-w-[48px] h-8 flex items-center justify-center\n                disabled:opacity-50 disabled:cursor-not-allowed\n                "+("buy"===i?"bg-app-primary-60 border-app-primary-40 color-primary hover-bg-primary-20 hover-border-primary":"bg-app-primary-60 border-error-alt-40 text-error-alt hover-bg-error-30 hover-border-error-alt"),children:n?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(s,{size:10,className:"animate-spin"}),r.jsx("span",{children:t})]}):t})},T=({label:t,isActive:a,onClick:s,onEdit:o,isEditMode:n})=>{const[i,l]=e.useState(!1),[c,d]=e.useState(t),p=e.useRef(null);e.useEffect(()=>{i&&p.current&&(p.current.focus(),p.current.select())},[i]);const m=()=>{c.trim()&&o(c.trim()),l(!1)},u=e=>{"Enter"===e.key?m():"Escape"===e.key&&(d(t),l(!1))};return i?r.jsx("div",{className:"flex-1",children:r.jsx("input",{ref:p,type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:u,onBlur:m,className:"w-full px-2 py-1 text-xs font-mono rounded\n                   bg-app-primary text-app-primary border border-app-primary-color\n                   focus:outline-none focus:ring-1 focus:ring-app-primary-40"})}):r.jsx("button",{onClick:()=>{n?(l(!0),d(t)):s()},className:`flex-1 px-3 py-1.5 text-xs font-mono rounded transition-all duration-200\n                ${a?"bg-primary-20 border border-app-primary-80 color-primary":"bg-app-primary-60 border border-app-primary-40 text-app-secondary-60 hover-border-primary-40 hover-text-app-secondary"}\n                ${n?"cursor-text":"cursor-pointer"}`,children:t})},A=({isOpen:t,onClose:a,selectedDate:s,onDateSelect:o,selectedTime:n,onTimeChange:i})=>{const[l,c]=e.useState(s.getMonth()),[m,u]=e.useState(s.getFullYear()),x=new Date(m,l+1,0).getDate(),y=new Date(m,l,1).getDay(),h=e=>{const r=new Date;return r.getDate()===e&&r.getMonth()===l&&r.getFullYear()===m},b=e=>s.getDate()===e&&s.getMonth()===l&&s.getFullYear()===m;return t?r.jsxs("div",{className:"absolute top-full left-0 z-50 mt-1 bg-app-primary border border-app-primary-40 rounded-lg shadow-lg shadow-black-80 p-2 min-w-[240px]",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("button",{onClick:()=>{0===l?(c(11),u(m-1)):c(l-1)},className:"p-0.5 hover:bg-app-primary-20 rounded transition-colors",children:r.jsx(d,{size:14,className:"text-app-secondary"})}),r.jsxs("div",{className:"text-xs font-mono text-app-primary",children:[["January","February","March","April","May","June","July","August","September","October","November","December"][l]," ",m]}),r.jsx("button",{onClick:()=>{11===l?(c(0),u(m+1)):c(l+1)},className:"p-0.5 hover:bg-app-primary-20 rounded transition-colors",children:r.jsx(p,{size:14,className:"text-app-secondary"})})]}),r.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-1",children:["Su","Mo","Tu","We","Th","Fr","Sa"].map(e=>r.jsx("div",{className:"text-[10px] font-mono text-app-secondary-60 text-center py-0.5",children:e},e))}),r.jsxs("div",{className:"grid grid-cols-7 gap-0.5 mb-2",children:[Array.from({length:y},(e,t)=>r.jsx("div",{className:"h-6"},`empty-${t}`)),Array.from({length:x},(e,t)=>{const a=t+1;return r.jsx("button",{onClick:()=>(e=>{const r=new Date(m,l,e);o(r)})(a),className:"h-6 w-6 text-[10px] font-mono rounded transition-colors flex items-center justify-center\n                "+(b(a)?"bg-app-primary-color text-black":h(a)?"bg-app-primary-20 text-app-primary border border-app-primary-40":"text-app-secondary hover:bg-app-primary-20"),children:a},a)})]}),r.jsxs("div",{className:"border-t border-app-primary-40 pt-2",children:[r.jsx("label",{className:"text-[10px] font-mono text-app-secondary-60 uppercase block mb-1",children:"Time"}),r.jsx("input",{type:"time",value:n,onChange:e=>i(e.target.value),className:"w-full px-1.5 py-1 bg-app-primary-80-alpha border border-app-primary-40 rounded \n                   text-app-primary placeholder-app-secondary-60 font-mono text-[10px] \n                   focus:outline-none focus-border-primary focus:ring-1 focus:ring-app-primary-40 \n                   transition-all duration-300"})]}),r.jsxs("div",{className:"flex gap-1 mt-2",children:[r.jsx("button",{onClick:a,className:"flex-1 px-2 py-1 text-[10px] font-mono bg-app-primary-60 border border-app-primary-40 \n                   text-app-secondary rounded hover:bg-app-primary-20 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>{const e=new Date(s),[r,t]=n.split(":");e.setHours(parseInt(r),parseInt(t)),o(e),a()},className:"flex-1 px-2 py-1 text-[10px] font-mono bg-app-primary-color text-black rounded \n                   hover:bg-app-primary-dark transition-colors",children:"Select"})]})]}):null},M=({tokenAddress:d,wallets:p,selectedDex:m,setSelectedDex:u,isDropdownOpen:x,setIsDropdownOpen:y,buyAmount:h,setBuyAmount:f,sellAmount:g,setSellAmount:k,handleTradeSubmit:S,isLoading:M,getScriptName:L,countActiveWallets:O,currentMarketCap:P,tokenBalances:D,onOpenFloating:I,isFloatingCardOpen:U,solPrice:$})=>{const{showToast:z}=b(),[R,W]=e.useState("trading"),[B,K]=e.useState("buy"),[Y,H]=e.useState("market"),[J,_]=e.useState(!1),G=e.useRef(null),V=e.useRef(null),[q,X]=e.useState(""),[Q,Z]=e.useState(""),[ee,re]=e.useState(""),[te,ae]=e.useState(""),[se,oe]=e.useState(""),[ne,ie]=e.useState(""),[le,ce]=e.useState(0),[de,pe]=e.useState(0),[me,ue]=e.useState(!1),[xe,ye]=e.useState(!1),[he,be]=e.useState(new Date),[fe,ge]=e.useState("12:00"),[ve,je]=e.useState(null),[Ne,we]=e.useState(!1),[ke,Se]=e.useState([]),[Ee,Ce]=e.useState(new Set),Fe=[{id:"degen",label:"DEGEN",buyPresets:["0.01","0.05","0.1","0.5"],sellPresets:["25","50","75","100"]},{id:"diamond",label:"DIAMOND",buyPresets:["0.001","0.01","0.05","0.1"],sellPresets:["10","25","50","75"]},{id:"yolo",label:"YOLO",buyPresets:["0.1","0.5","1","5"],sellPresets:["50","75","90","100"]}],Te=(()=>{try{const e=document.cookie.split("; ").find(e=>e.startsWith("tradingPresets="))?.split("=")[1];if(e){const r=decodeURIComponent(e),t=JSON.parse(r);return{tabs:Array.isArray(t.tabs)?t.tabs:Fe,activeTabId:t.activeTabId||"degen"}}}catch(e){}return{tabs:Fe,activeTabId:"degen"}})(),[Ae,Me]=e.useState(Te.tabs),[Le,Oe]=e.useState(Te.activeTabId),Pe=Ae.find(e=>e.id===Le)||Ae[0];e.useEffect(()=>{((e,r)=>{try{const t={tabs:e,activeTabId:r},a=encodeURIComponent(JSON.stringify(t)),s=new Date;s.setFullYear(s.getFullYear()+1),document.cookie=`tradingPresets=${a}; expires=${s.toUTCString()}; path=/`}catch(t){}})(Ae,Le)},[Ae,Le]);const De=async()=>{if(!p||0===p.length)return void z("No wallets available","error");if(!d)return je(null),void z("No token selected","error");if(!window.tradingServerUrl)return z("Trading server URL not configured","error"),void je(null);we(!0);try{const e=p.filter(e=>e.isActive);if(0===e.length)return je(null),void z("No active wallets found","error");const r=e.map(e=>(async e=>{try{const r=new URLSearchParams({userAddress:e}),t=j(),a=await fetch(`${t}/limit/active?${r.toString()}`,{method:"GET",headers:{"Content-Type":"application/json"}}),s=await a.json();return a.ok?s:{success:!1,error:s.error||`HTTP ${a.status}: ${a.statusText}`}}catch(r){return{success:!1,error:r instanceof Error?r.message:"Unknown error occurred"}}})(e.address)),t=await Promise.all(r),a=t.filter(e=>e.success);if(0===a.length){const e=t.filter(e=>!e.success).map(e=>e.error).filter(Boolean);return e.length>0?z(`Failed to load orders: ${e[0]}`,"error"):z("Failed to load active orders","error"),void je(null)}const s=a.reduce((e,r)=>(r.orders?.orders&&e.push(...r.orders.orders),e),[]),o="So11111111111111111111111111111111111111112",n=s.filter(e=>{const r=e.inputMint||e.account?.inputMint,t=e.outputMint||e.account?.outputMint;return r===o&&t===d||r===d&&t===o});je({success:!0,orders:{orders:n}}),z(`Refreshed ${n.length} active orders`,"success")}catch(e){z(`Error loading orders: ${e instanceof Error?e.message:"Unknown error"}`,"error"),je(null)}finally{we(!1)}},Ie=e=>0===e?"0":e<1?e.toFixed(10).replace(/\.?0+$/,""):e>=1e6?e.toFixed(2):e>=1e3?e.toFixed(4):e>=1?e.toFixed(6):e.toFixed(10).replace(/\.?0+$/,"");e.useEffect(()=>{let e=te;if(ee&&$){const r=parseFloat(ee);e=Ie(r/($*1e9)),ae(e)}if("buy"===B)if(q&&e){const r=parseFloat(q),t=parseFloat(e);Z((r/t).toFixed(6)),oe(Ie(t))}else if(q&&Q){const e=N(parseFloat(q)),r=(parseFloat(Q)*Math.pow(10,6)).toString(),t=w(e,r);oe(Ie(t)),ae(Ie(t))}else oe("");else if(Q&&e){const r=parseFloat(Q),t=parseFloat(e);X((r*t).toFixed(6)),oe(Ie(t))}else if(q&&Q){const e=N(parseFloat(q)),r=(parseFloat(Q)*Math.pow(10,6)).toString(),t=w(r,e);oe(Ie(t)),ae(Ie(t))}else oe("")},[q,Q,te,ee,$,B]),e.useEffect(()=>{P&&P>0&&pe(P)},[P]),e.useEffect(()=>{if(de>0){re((de*(1+le/100)).toFixed(2))}},[le,de]),e.useEffect(()=>{"orders"===R&&De()},[R,d]),e.useEffect(()=>{const e=e=>{G.current&&!G.current.contains(e.target)&&y(!1),V.current&&!V.current.contains(e.target)&&ye(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]);const Ue=(()=>{if(!P||!$||!h&&!g)return{tokenAmount:null,solAmount:null};const e=P/(1e9*$);if("buy"===B&&h){const r=parseFloat(h);return{tokenAmount:r/e,solAmount:r}}if("sell"===B&&g&&D){const r=parseFloat(g)/100,t=p.filter(e=>e.isActive).reduce((e,r)=>e+(D.get(r.address)||0),0)*r;return{tokenAmount:t,solAmount:t*e}}return{tokenAmount:null,solAmount:null}})(),$e=e=>e?e>=1e6?(e/1e6).toFixed(2)+"M":e>=1e3?(e/1e3).toFixed(2)+"K":e<.01?e.toExponential(2):e.toFixed(2):"";return r.jsxs("div",{className:"relative overflow-hidden rounded-xl shadow-xl",children:[r.jsxs("div",{className:"absolute top-0 left-0 w-24 h-24 pointer-events-none",children:[r.jsx("div",{className:"absolute top-0 left-0 w-px h-8 bg-gradient-to-b from-app-primary-color to-transparent"}),r.jsx("div",{className:"absolute top-0 left-0 w-8 h-px bg-gradient-to-r from-app-primary-color to-transparent"})]}),r.jsxs("div",{className:"absolute top-0 right-0 w-24 h-24 pointer-events-none",children:[r.jsx("div",{className:"absolute top-0 right-0 w-px h-8 bg-gradient-to-b from-app-primary-color to-transparent"}),r.jsx("div",{className:"absolute top-0 right-0 w-8 h-px bg-gradient-to-l from-app-primary-color to-transparent"})]}),r.jsxs("div",{className:"absolute bottom-0 left-0 w-24 h-24 pointer-events-none",children:[r.jsx("div",{className:"absolute bottom-0 left-0 w-px h-8 bg-gradient-to-t from-app-primary-color to-transparent"}),r.jsx("div",{className:"absolute bottom-0 left-0 w-8 h-px bg-gradient-to-r from-app-primary-color to-transparent"})]}),r.jsxs("div",{className:"absolute bottom-0 right-0 w-24 h-24 pointer-events-none",children:[r.jsx("div",{className:"absolute bottom-0 right-0 w-px h-8 bg-gradient-to-t from-app-primary-color to-transparent"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-8 h-px bg-gradient-to-l from-app-primary-color to-transparent"})]}),!U&&r.jsxs("div",{className:"flex bg-app-primary-60 border-b border-app-primary-20",children:[r.jsx("button",{onClick:()=>W("orders"),className:"px-3 py-2 text-xs font-mono tracking-wider transition-all duration-200 "+("orders"===R?"bg-app-primary-40 color-primary border-r border-app-primary-60":"bg-transparent text-app-secondary-40 hover:text-app-secondary-60 border-r border-app-primary-20"),children:r.jsx(t,{size:14})}),r.jsxs("div",{className:"flex flex-1",children:[r.jsx("button",{onClick:()=>{W("trading"),K("buy")},className:"flex-1 py-3 px-4 text-sm font-mono tracking-wider transition-all duration-200 "+("trading"===R&&"buy"===B?"bg-app-primary-color text-black font-medium":"bg-transparent text-app-secondary-60 hover-text-app-secondary"),children:"BUY"}),r.jsx("button",{onClick:()=>{W("trading"),K("sell")},className:"flex-1 py-3 px-4 text-sm font-mono tracking-wider transition-all duration-200 "+("trading"===R&&"sell"===B?"bg-error-alt text-white font-medium":"bg-transparent text-warning-60 hover:text-error-alt"),children:"SELL"})]}),r.jsx("div",{className:"flex items-center px-3 py-2 border-l border-app-primary-20",children:r.jsxs("div",{className:"flex items-center gap-1 text-xs font-mono text-app-secondary-60",children:[r.jsx("span",{className:"color-primary",children:O(p)}),r.jsx("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",className:"color-primary",children:r.jsx("path",{d:"M21 8V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v2h18zM3 10v8a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-8H3zm13 4h2v2h-2v-2z",fill:"currentColor"})})]})})]}),!U&&"trading"===R&&r.jsxs("div",{className:"flex items-center justify-between px-4 py-2 bg-app-primary-40 border-b border-app-primary-10",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("button",{onClick:()=>H("market"),className:"text-xs font-mono tracking-wider transition-all duration-200 "+("market"===Y?"color-primary border-b-2 border-app-primary-color pb-1":"text-app-secondary-60 hover-text-app-secondary pb-1"),children:"MARKET"}),r.jsx("button",{onClick:()=>H("limit"),className:"text-xs font-mono tracking-wider transition-all duration-200 "+("limit"===Y?"color-primary border-b-2 border-app-primary-color pb-1":"text-app-secondary-60 hover-text-app-secondary pb-1"),children:"LIMIT"})]}),"limit"!==Y&&r.jsx("div",{className:"flex items-center gap-2",children:r.jsx("button",{onClick:I,className:"p-1.5 rounded hover-bg-primary-20 text-app-secondary-60 hover:color-primary transition-all duration-200",title:"Detach",children:r.jsx(a,{size:14})})})]}),U?r.jsx("div",{className:"p-8 text-center",children:r.jsx("p",{className:"text-app-secondary-60 text-sm font-mono tracking-wider",children:"TRADING INTERFACE IS OPEN IN FLOATING MODE"})}):r.jsx("div",{className:"p-3 space-y-2",children:"orders"===R?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-mono tracking-wider text-app-secondary uppercase",children:"ACTIVE ORDERS"}),Ne&&r.jsx(s,{size:12,className:"animate-spin color-primary"})]}),r.jsx("div",{className:"flex gap-1",children:r.jsx("button",{onClick:De,disabled:Ne,className:"p-1 bg-app-primary-60 border border-app-primary-40 color-primary hover-bg-primary-20 rounded transition-all duration-200 disabled:opacity-50",title:"Refresh orders",children:r.jsx(o,{size:12})})})]}),Ne?r.jsx("div",{className:"text-center py-8",children:r.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[r.jsx(s,{size:16,className:"animate-spin color-primary"}),r.jsx("span",{className:"text-app-secondary-60 text-sm font-mono",children:"Loading orders..."})]})}):d?ve&&ve.orders&&ve.orders.orders.length>0?r.jsx("div",{className:"space-y-2",children:ve.orders.orders.map((e,t)=>{const a=e.orderKey||e.account?.orderKey,o=e.userPubkey||e.account?.userPubkey,i=e.makingAmount||e.account?.makingAmount,l=e.takingAmount||e.account?.takingAmount,c=e.expiredAt||e.account?.expiredAt,d="So11111111111111111111111111111111111111112",m=(e.inputMint||e.account?.inputMint)===d,u=(e.outputMint||e.account?.outputMint)===d;return r.jsxs("div",{className:"bg-app-primary-60 border border-app-primary-20 rounded-lg p-3",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"text-xs font-mono px-2 py-1 rounded "+(m?"bg-app-primary-color text-black":u?"bg-[#ff3232] text-white":"bg-primary-20 color-primary"),children:m?"BUY":u?"SELL":`#${t+1}`}),r.jsxs("span",{className:"text-xs font-mono text-app-secondary-60",children:[o.slice(0,8),"...",o.slice(-4)]})]}),r.jsx("button",{onClick:()=>(async(e,r)=>{const t=p.find(e=>e.address===r);if(t){Ce(r=>new Set(r).add(e));try{const a=await C({maker:r,order:e},t);a.success||Se(e=>[...e,`Failed to cancel order: ${a.error}`])}catch(a){Se(e=>[...e,`Error canceling order: ${a instanceof Error?a.message:"Unknown error"}`])}finally{Ce(r=>{const t=new Set(r);return t.delete(e),t})}}})(a,o),disabled:Ee.has(a),className:"p-1 bg-error-20 border border-error-alt-40 text-error-alt hover-bg-error-30 rounded transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",title:Ee.has(a)?"Cancelling...":"Cancel order",children:Ee.has(a)?r.jsx(s,{size:12,className:"animate-spin"}):r.jsx(n,{size:12})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs font-mono",children:[m?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-app-secondary-60",children:"Spending: "}),r.jsxs("span",{className:"text-app-primary",children:[parseFloat(i).toFixed(4)," SOL"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-app-secondary-60",children:"Receiving: "}),r.jsxs("span",{className:"text-app-primary",children:[parseInt(l).toFixed(2)," tokens"]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-app-secondary-60",children:"Price: "}),r.jsxs("span",{className:"color-primary",children:[w(i,l).toFixed(8)," tokens/SOL"]})]})]}):u?r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-app-secondary-60",children:"Selling: "}),r.jsxs("span",{className:"text-app-primary",children:[parseInt(i).toFixed(2)," tokens"]})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-app-secondary-60",children:"Receiving: "}),r.jsxs("span",{className:"text-app-primary",children:[parseFloat(l).toFixed(4)," SOL"]})]}),r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-app-secondary-60",children:"Price: "}),r.jsxs("span",{className:"color-primary",children:[(parseFloat(l)/parseInt(i)).toFixed(8)," SOL/token"]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-app-secondary-60",children:"Making: "}),r.jsx("span",{className:"text-app-primary",children:parseFloat(i).toFixed(4)})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-app-secondary-60",children:"Taking: "}),r.jsx("span",{className:"text-app-primary",children:parseInt(l).toFixed(2)})]})]}),c&&r.jsxs("div",{className:"col-span-2",children:[r.jsx("span",{className:"text-app-secondary-60",children:"Expires: "}),r.jsx("span",{className:"text-app-primary",children:new Date(1e3*c).toLocaleString()})]})]})]},a)})}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-app-secondary-60 text-sm font-mono mb-2",children:"No active orders for this token"}),r.jsx("div",{className:"text-app-secondary-40 text-xs font-mono",children:"Create limit orders in the trading tab"})]}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"text-app-secondary-60 text-sm font-mono mb-2",children:"No token selected"}),r.jsx("div",{className:"text-app-secondary-40 text-xs font-mono",children:"Select a token to view orders"})]})]}):r.jsxs(r.Fragment,{children:["limit"!==Y&&r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"text-xs font-mono tracking-wider text-app-secondary uppercase",children:"AMOUNT"}),r.jsx("span",{className:"text-xs text-app-secondary-60 font-mono",children:"buy"===B?"SOL/WALLET":"% TOKENS"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx("input",{type:"text",value:"buy"===B?h:g,onChange:e=>{const r=e.target.value.replace(/[^0-9.]/g,"");"buy"===B?f(r):k(r)},placeholder:"0.0",disabled:!d||M,className:"w-full px-2 py-2 bg-app-primary-80-alpha border border-app-primary-40 rounded-lg \n                             text-app-primary placeholder-app-secondary-60 font-mono text-sm \n                             focus:outline-none focus-border-primary focus:ring-1 focus:ring-app-primary-40 \n                             transition-all duration-300 shadow-inner-black-80\n                             disabled:opacity-50 disabled:cursor-not-allowed"}),M&&r.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:r.jsx(s,{size:16,className:"animate-spin color-primary"})})]}),r.jsx("button",{onClick:()=>S(p,"buy"===B,m,"buy"===B?h:void 0,"sell"===B?g:void 0),disabled:!m||!h&&!g||M||!d,className:"px-4 py-2 text-sm font-mono tracking-wider rounded-lg \n                           transition-all duration-300 relative overflow-hidden whitespace-nowrap\n                           disabled:opacity-50 disabled:cursor-not-allowed "+("buy"===B?"bg-gradient-to-r from-app-primary-color to-app-primary-dark hover-from-app-primary-dark hover-to-app-primary-darker text-black font-medium shadow-md shadow-app-primary-40 hover-shadow-app-primary-60 disabled:from-app-primary-40 disabled:to-app-primary-40 disabled:shadow-none":"bg-gradient-to-r from-[#ff3232] to-[#e62929] hover:from-[#e62929] hover:to-[#cc2020] text-white font-medium shadow-md shadow-[#ff323240] hover:shadow-[#ff323260] disabled:from-[#ff323240] disabled:to-[#ff323240] disabled:shadow-none"),children:M?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(s,{size:16,className:"animate-spin"}),"PROCESSING..."]}):"buy"===B?Ue.tokenAmount&&h?`${$e(Ue.tokenAmount)}`:"BUY":Ue.solAmount&&g?`${$e(Ue.solAmount)}`:"SELL"})]})]}),"limit"!==Y&&r.jsxs("div",{className:"flex gap-1 mb-2",children:[Ae.map(e=>r.jsx(T,{label:e.label,isActive:e.id===Le,isEditMode:J,onClick:()=>{return r=e.id,void Oe(r);var r},onEdit:r=>((e,r)=>{Me(t=>t.map(t=>t.id===e?{...t,label:r}:t))})(e.id,r)},e.id)),r.jsx("button",{onClick:()=>_(!J),className:"px-2 py-1 text-xs rounded transition-colors "+(J?"bg-app-primary-color hover:bg-app-primary-dark text-black":"bg-app-primary-60 border border-app-primary-40 color-primary hover-bg-primary-20"),title:J?"Save changes":"Edit presets",children:J?r.jsx(i,{size:12}):r.jsx(l,{size:12})})]}),"limit"!==Y&&r.jsx("div",{className:"grid grid-cols-4 gap-1",children:("buy"===B?Pe.buyPresets:Pe.sellPresets).map((e,t)=>r.jsx(F,{value:e,onExecute:()=>(e=>{"buy"===B?(f(e),S(p,!0,m,e,void 0)):(k(e),S(p,!1,m,void 0,e))})(e),onChange:e=>{"buy"===B?((e,r)=>{Me(t=>t.map(t=>t.id===Le?{...t,buyPresets:t.buyPresets.map((t,a)=>a===e?r:t)}:t))})(t,e):((e,r)=>{Me(t=>t.map(t=>t.id===Le?{...t,sellPresets:t.sellPresets.map((t,a)=>a===e?r:t)}:t))})(t,e)},isLoading:M,variant:B,isEditMode:J,index:t},`${B}-${t}`))}),"limit"===Y&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"space-y-1 relative",children:[r.jsx("label",{className:"text-xs font-mono tracking-wider text-app-secondary-60 uppercase",children:"EXPIRY (OPTIONAL)"}),r.jsxs("div",{className:"relative",ref:V,children:[r.jsxs("button",{type:"button",onClick:()=>ye(!xe),disabled:!d||me,className:"w-full px-2 py-2 bg-app-primary-80-alpha border border-app-primary-40 rounded-lg \n                             text-app-primary placeholder-app-secondary-60 font-mono text-sm \n                             focus:outline-none focus-border-primary focus:ring-1 focus:ring-app-primary-40 \n                             transition-all duration-300 shadow-inner-black-80\n                             disabled:opacity-50 disabled:cursor-not-allowed\n                             flex items-center justify-between",children:[r.jsx("span",{className:ne?"text-app-primary":"text-app-secondary-60",children:ne?(e=>{if(!e)return"";return new Date(e).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})})(ne):"Select expiry date..."}),r.jsx(c,{size:16,className:"text-app-secondary-60"})]}),ne&&r.jsx("button",{type:"button",onClick:()=>{ie(""),re(""),ce(0),ye(!1)},className:"absolute right-8 top-1/2 transform -translate-y-1/2 text-app-secondary-60 hover:text-app-primary transition-colors",children:r.jsx(n,{size:14})}),r.jsx(A,{isOpen:xe,onClose:()=>ye(!1),selectedDate:he,onDateSelect:e=>{be(e);const r=e.toISOString().slice(0,16);ie(r)},selectedTime:fe,onTimeChange:e=>{ge(e)}})]})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-mono tracking-wider text-app-secondary uppercase",children:"buy"===B?"SOL AMOUNT":"TOKEN AMOUNT"}),r.jsx("input",{type:"text",value:"buy"===B?q:Q,onChange:e=>{const r=e.target.value.replace(/[^0-9.]/g,"");if("buy"===B)X(r),r&&parseFloat(r)<.1&&z("Minimum SOL amount for limit orders is 0.1 SOL","error");else if(Z(r),r&&te){parseFloat(r)*parseFloat(te)<.1&&z("Minimum SOL amount for limit orders is 0.1 SOL","error")}},placeholder:"0.0",disabled:!d||me,className:"w-full px-2 py-2 bg-app-primary-80-alpha border border-app-primary-40 rounded-lg \n                           text-app-primary placeholder-app-secondary-60 font-mono text-sm \n                           focus:outline-none focus-border-primary focus:ring-1 focus:ring-app-primary-40 \n                           transition-all duration-300 shadow-inner-black-80\n                           disabled:opacity-50 disabled:cursor-not-allowed"})]}),r.jsxs("div",{className:"space-y-1",children:[r.jsx("label",{className:"text-xs font-mono tracking-wider text-app-secondary uppercase",children:"AVG PRICE (SOL/TOKEN)"}),r.jsx("input",{type:"text",value:te,onChange:e=>{const r=e.target.value.replace(/[^0-9.]/g,"");if(ae(r),"sell"===B&&Q&&r){parseFloat(Q)*parseFloat(r)<.1&&z("Minimum SOL amount for limit orders is 0.1 SOL","error")}},placeholder:"0.0",disabled:!0,className:"w-full px-2 py-2 bg-app-primary-80-alpha border border-app-primary-40 rounded-lg \n                           text-app-primary placeholder-app-secondary-60 font-mono text-sm \n                           focus:outline-none focus-border-primary focus:ring-1 focus:ring-app-primary-40 \n                           transition-all duration-300 shadow-inner-black-80\n                           disabled:opacity-50 disabled:cursor-not-allowed"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("label",{className:"text-xs font-mono tracking-wider text-app-secondary uppercase",children:"MARKET CAP"}),r.jsx("input",{type:"text",value:le>0?`+${le}`:le.toString(),onChange:e=>{const r=e.target.value.replace(/[^-0-9.]/g,"");if(""===r||"-"===r)ce(0);else{const e=parseFloat(r);isNaN(e)||ce(Math.round(e))}},disabled:!d||me||!de,className:"text-xs font-mono color-primary bg-app-primary-90-alpha border border-app-primary-30 rounded px-1 py-0.5 text-right w-16\n                             disabled:opacity-50 disabled:cursor-not-allowed\n                             hover:border-app-primary-40 focus:border-app-primary-50 focus:bg-app-primary-80-alpha focus:outline-none\n                             transition-all duration-200"})]}),r.jsx("div",{className:"relative",children:r.jsx("input",{type:"range",min:"-100",max:"200",step:"5",value:le,onChange:e=>ce(parseInt(e.target.value)),disabled:!d||me||!de,className:"w-full h-2 bg-app-primary-60 rounded-lg appearance-none cursor-pointer\n                             disabled:opacity-50 disabled:cursor-not-allowed\n                             slider-thumb"})}),de>0&&r.jsx("div",{className:"bg-primary-10 border border-app-primary-20 rounded-lg p-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-mono text-app-secondary-60 uppercase",children:"Target Market Cap:"}),r.jsxs("span",{className:"text-xs font-mono color-primary",children:["$",ee?parseFloat(ee).toLocaleString():"0"]})]})})]}),("buy"===B&&Q||"sell"===B&&q)&&r.jsx("div",{className:"bg-primary-10 border border-app-primary-20 rounded-lg p-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-mono text-app-secondary-60 uppercase",children:"buy"===B?"Calculated Token Amount:":"Calculated SOL Amount:"}),r.jsx("span",{className:"text-xs font-mono color-primary",children:"buy"===B?Q:q})]})}),se&&r.jsx("div",{className:"bg-primary-10 border border-app-primary-20 rounded-lg p-2",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-xs font-mono text-app-secondary-60 uppercase",children:"Price:"}),r.jsxs("span",{className:"text-xs font-mono color-primary",children:[se," ","buy"===B?"tokens/SOL":"SOL/token"]})]})}),r.jsx("button",{onClick:async()=>{if(!q||!Q)return void Se(["Please ensure both SOL and token amounts are calculated"]);if(parseFloat(q)<.1)return z("Minimum SOL amount for limit orders is 0.1 SOL","error"),void Se(["Minimum SOL amount for limit orders is 0.1 SOL"]);const e=p.filter(e=>e.isActive);if(0!==e.length){ue(!0),Se([]);try{let r,t;"buy"===B?(r=N(parseFloat(q)),t=(parseFloat(Q)*Math.pow(10,6)).toString()):(r=(parseFloat(Q)*Math.pow(10,6)).toString(),t=N(parseFloat(q)));const a="buy"===B?{inputMint:"So11111111111111111111111111111111111111112",outputMint:d,makingAmount:r,takingAmount:t,slippageBps:50,expiredAt:ne?Math.floor(new Date(ne).getTime()/1e3):void 0}:{inputMint:d,outputMint:"So11111111111111111111111111111111111111112",makingAmount:r,takingAmount:t,slippageBps:50,expiredAt:ne?Math.floor(new Date(ne).getTime()/1e3):void 0},s=(e=>{const r=[];return e.inputMint&&""!==e.inputMint.trim()||r.push("Input mint is required"),e.outputMint&&""!==e.outputMint.trim()||r.push("Output mint is required"),e.maker&&""!==e.maker.trim()||r.push("Maker address is required"),(!e.makingAmount||parseFloat(e.makingAmount)<=0)&&r.push("Making amount must be greater than 0"),(!e.takingAmount||parseFloat(e.takingAmount)<=0)&&r.push("Taking amount must be greater than 0"),void 0!==e.slippageBps&&(e.slippageBps<0||e.slippageBps>1e4)&&r.push("Slippage must be between 0 and 10000 basis points"),void 0!==e.expiredAt&&e.expiredAt<=Date.now()/1e3&&r.push("Expiration time must be in the future"),{valid:0===r.length,errors:r}})({...a,maker:e[0].address});if(!s.valid)return void Se(s.errors);const o=await(async(e,r,t)=>{try{const a=v(),s={orders:e.map(e=>({...r,maker:e.address})),rpcUrl:t?.rpcUrl||a?.rpcEndpoint,includeTip:t?.includeTip??!0,jitoTipLamports:t?.jitoTipLamports??(a?.transactionFee?Math.floor(1e9*parseFloat(a.transactionFee)):5e6),affiliateAddress:t?.affiliateAddress,affiliateFee:t?.affiliateFee,authenticated:t?.authenticated??!1},o=j(),n=await fetch(`${o}/limit/create`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),i=await n.json();return n.ok?i:{success:!1,error:i.error||`HTTP ${n.status}: ${n.statusText}`}}catch(a){return{success:!1,error:a instanceof Error?a.message:"Unknown error occurred"}}})(e,a);if(o.success)if(o.transactions&&o.transactions.length>0){const r=await E(o,e);if(!r.success)return void Se([`Bundle failed to send: ${r.error}`]);X(""),Z(""),ae(""),re(""),oe(""),ie(""),ce(0),ye(!1),be(new Date),ge("12:00")}else X(""),Z(""),ae(""),re(""),oe(""),ie(""),ce(0),ye(!1),be(new Date),ge("12:00");else Se([o.error||"Failed to create limit orders"])}catch(r){Se([r instanceof Error?r.message:"Unknown error occurred"])}finally{ue(!1)}}else Se(["No active wallets selected"])},disabled:!d||!te||"buy"===B&&!q||"sell"===B&&!Q||me||0===p.filter(e=>e.isActive).length,className:"w-full px-4 py-2 text-sm font-mono tracking-wider rounded-lg \n                         bg-gradient-to-r from-app-primary-color to-app-primary-dark hover-from-app-primary-dark hover-to-app-primary-darker \n                         text-black font-medium shadow-md shadow-app-primary-40 hover-shadow-app-primary-60\n                         transition-all duration-300 relative overflow-hidden\n                         disabled:opacity-50 disabled:cursor-not-allowed disabled:from-app-primary-40 disabled:to-app-primary-40 disabled:shadow-none",children:me?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx(s,{size:16,className:"animate-spin"}),"CREATING ORDER..."]}):`CREATE LIMIT ${B.toUpperCase()}`})]})]})})]})},L=({pnlData:t})=>{const a=e.useRef(null),[s,o]=e.useState(!1),n=(()=>{if(!t||0===Object.keys(t).length)return{totalProfit:0,profitableWallets:0,unprofitableWallets:0,totalWallets:0,bestProfit:0,worstProfit:0};let e=0,r=-1/0,a=1/0;return Object.values(t).forEach(t=>{t&&"number"==typeof t.profit&&(e+=t.profit,t.profit>r&&(r=t.profit),t.profit<a&&(a=t.profit))}),{totalProfit:e,profitableWallets:Object.values(t).filter(e=>e&&"number"==typeof e.profit&&e.profit>0).length,unprofitableWallets:Object.values(t).filter(e=>e&&"number"==typeof e.profit&&e.profit<0).length,totalWallets:Object.keys(t).length,bestProfit:r!==-1/0?r:0,worstProfit:a!==1/0?a:0}})(),i=e=>e>0?`+${e.toFixed(5)}`:e.toFixed(5),l=n.totalProfit<0;return r.jsxs("div",{className:"flex flex-col items-center max-w-md mx-auto",children:[r.jsxs("div",{ref:a,className:`w-full relative overflow-hidden rounded-3xl ${l?"bg-gradient-to-br from-error-05 to-error-20 border-error-20 shadow-error-40":"bg-gradient-to-br from-primary-05 to-primary-20 border-app-primary-20 shadow-app-primary-40"} bg-app-primary border backdrop-blur-3xl`,style:{fontFamily:"Consolas, monospace",fontWeight:400},children:[r.jsx("div",{className:"absolute inset-0 opacity-5",children:r.jsx("div",{className:"absolute inset-0 "+(l?"bg-gradient-radial from-error-alt-30 via-transparent to-error-alt-20":"bg-gradient-radial from-app-primary-30 via-transparent to-app-primary-20"),style:{backgroundSize:"100px 100px"}})}),r.jsxs("div",{className:"p-8 relative z-10",children:[r.jsx("div",{className:"flex items-center mb-8",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center overflow-hidden",children:[r.jsx("img",{src:"/assets/logo-D_4aSxNI.png",alt:"Logo",className:"w-12 h-12 object-contain",onError:e=>{e.currentTarget.style.display="none";const r=e.currentTarget.nextElementSibling;r&&(r.style.display="block")}}),r.jsx("svg",{width:"32",height:"32",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{display:"none"},children:r.jsx("path",{d:"M13 10V3L4 14h7v7l9-11h-7z",fill:"currentColor",strokeWidth:"0",className:"text-app-primary"})})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"text-app-primary font-bold text-2xl tracking-tight",children:g.name}),r.jsx("p",{className:"text-sm font-medium "+(l?"text-error-alt":"color-primary"),children:g.appUrl})]})]})}),r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("div",{className:"text-app-muted text-sm font-medium mb-2",children:"Total P&L"}),r.jsxs("div",{className:"text-4xl font-bold mb-1 "+(n.totalProfit>=0?"color-primary":"text-error-alt"),children:[i(n.totalProfit)," SOL"]})]}),r.jsxs("div",{className:"grid gap-4 mb-6 "+(n.profitableWallets>0&&n.unprofitableWallets>0?"grid-cols-2":n.profitableWallets>0||n.unprofitableWallets>0?"grid-cols-3":"grid-cols-2"),children:[r.jsxs("div",{className:"bg-app-primary-05 backdrop-blur-sm rounded-xl p-4 border border-app-primary-10",children:[r.jsx("div",{className:"text-app-muted text-xs font-medium mb-1",children:"Total Wallets"}),r.jsx("div",{className:"text-app-primary text-xl font-bold",children:n.totalWallets})]}),r.jsxs("div",{className:"bg-app-primary-05 backdrop-blur-sm rounded-xl p-4 border border-app-primary-10",children:[r.jsx("div",{className:"text-app-muted text-xs font-medium mb-1",children:"Win Rate"}),r.jsxs("div",{className:"text-xl font-bold "+(l?"text-error-alt":"color-primary"),children:[n.totalWallets>0?Math.round(n.profitableWallets/n.totalWallets*100):0,"%"]})]}),n.profitableWallets>0&&r.jsxs("div",{className:"bg-app-primary-05 backdrop-blur-sm rounded-xl p-4 border border-app-primary-10",children:[r.jsx("div",{className:"text-app-muted text-xs font-medium mb-1",children:"Best Trade"}),r.jsx("div",{className:"text-lg font-bold "+(n.bestProfit>=0?"color-primary":"text-error-alt"),children:i(n.bestProfit)})]}),n.unprofitableWallets>0&&r.jsxs("div",{className:"bg-app-primary-05 backdrop-blur-sm rounded-xl p-4 border border-app-primary-10",children:[r.jsx("div",{className:"text-app-muted text-xs font-medium mb-1",children:"Worst Trade"}),r.jsx("div",{className:"text-lg font-bold "+(n.worstProfit>=0?"color-primary":"text-error-alt"),children:i(n.worstProfit)})]})]}),r.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-app-primary-10",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"text-app-muted",children:r.jsx("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})}),r.jsx("span",{className:"text-app-muted text-xs",children:g.social.twitter})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",className:"text-app-muted",children:r.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),r.jsx("span",{className:"text-app-muted text-xs",children:g.social.github})]})]})]})]}),r.jsx("button",{onClick:async()=>{o(!0);try{const e=(await f(async()=>{const{default:e}=await import("./html2canvas.esm.js-B_qGT6JC.js");return{default:e}},[])).default;if(a.current){const r=(await e(a.current,{scale:2,backgroundColor:null,logging:!1,useCORS:!0,allowTaint:!0,imageTimeout:15e3})).toDataURL("image/png"),t=document.createElement("a");t.href=r,t.download="pnl.png",t.click()}}catch(e){alert("To download this card as an image, html2canvas library would need to be installed.")}finally{o(!1)}},disabled:s,className:"mt-6 w-full group relative overflow-hidden rounded-2xl p-0.5 transition-all duration-300 hover:scale-105 hover:shadow-xl disabled:opacity-50 disabled:hover:scale-100 "+(l?"bg-gradient-to-r from-error-alt to-error hover-shadow-error-alt":"bg-gradient-to-r from-app-primary-color to-app-primary-dark hover-shadow-app-primary-60"),children:r.jsx("div",{className:"relative rounded-2xl bg-app-primary-60 backdrop-blur-sm px-6 py-3 transition-all duration-300 group-hover:bg-app-primary-40",children:r.jsx("div",{className:"flex items-center justify-center text-app-primary font-medium",children:s?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-app-primary border-t-transparent rounded-full mr-3"}),r.jsx("span",{children:"Generating Image..."})]}):r.jsxs(r.Fragment,{children:[r.jsx(m,{size:20,className:"mr-3 transition-transform duration-300 group-hover:scale-110"}),r.jsx("span",{children:"Download PNL Card"}),r.jsx("div",{className:"ml-3 opacity-0 transition-all duration-300 group-hover:opacity-100 group-hover:translate-x-1",children:r.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M7 17L17 7M17 7H7M17 7V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})})})})]})},O=({value:t,onExecute:a,onChange:o,isLoading:n,variant:i="buy",isEditMode:l,index:c})=>{const[d,p]=e.useState(t),m=e.useRef(null);e.useEffect(()=>{p(t)},[t]),e.useEffect(()=>{l&&m.current&&m.current?.focus()},[l]);const u=e=>{if("Enter"===e.key){const e=parseFloat(d);!isNaN(e)&&e>0&&o(e.toString())}else"Escape"===e.key&&p(t)},x=()=>{const e=parseFloat(d);!isNaN(e)&&e>0?o(e.toString()):p(t)};return l?r.jsx("div",{className:"relative",children:r.jsx("input",{ref:m,type:"text",value:d,onChange:e=>p(e.target.value.replace(/[^0-9.]/g,"")),onKeyDown:u,onBlur:x,className:"w-full h-8 px-2 text-xs font-mono rounded border text-center\n                   bg-app-primary text-app-primary border-app-primary\n                   focus:outline-none focus:ring-1 focus:ring-app-primary-40"})}):r.jsx("button",{onClick:()=>a(t),className:"relative group px-2 py-1.5 text-xs font-mono rounded border transition-all duration-200\n                min-w-[48px] h-8 flex items-center justify-center\n                "+("buy"===i?"bg-app-primary-60 border-app-primary-40 color-primary hover:bg-primary-20 hover-border-primary":"bg-app-primary-60 border-error-alt-40 text-error-alt hover:bg-error-20 hover:border-error-alt"),children:n?r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(s,{size:10,className:"animate-spin"}),r.jsx("span",{children:t})]}):t})},P=({label:t,isActive:a,onClick:s,onEdit:o,isEditMode:n})=>{const[i,l]=e.useState(!1),[c,d]=e.useState(t),p=e.useRef(null);e.useEffect(()=>{i&&p.current&&(p.current.focus(),p.current.select())},[i]);const m=()=>{c.trim()&&o(c.trim()),l(!1)},u=e=>{"Enter"===e.key?m():"Escape"===e.key&&(d(t),l(!1))};return i?r.jsx("div",{className:"flex-1",children:r.jsx("input",{ref:p,type:"text",value:c,onChange:e=>d(e.target.value),onKeyDown:u,onBlur:m,className:"w-full px-2 py-1 text-xs font-mono rounded\n                   bg-app-primary text-app-primary border border-app-primary\n                   focus:outline-none focus:ring-1 focus:ring-app-primary-40"})}):r.jsx("button",{onClick:n?()=>{n&&(l(!0),d(t))}:s,className:`flex-1 px-3 py-1.5 text-xs font-mono rounded transition-all duration-200\n                ${a?"bg-primary-20 border border-app-primary color-primary":"bg-app-primary-60 border border-app-primary-20 text-app-secondary-60 hover-border-primary-40 hover:text-app-secondary"}\n                ${n?"cursor-text":"cursor-pointer"}`,children:t})},D=Object.freeze(Object.defineProperty({__proto__:null,default:({isOpen:t,onClose:s,position:o,onPositionChange:c,isDragging:d,onDraggingChange:p,tokenAddress:m,wallets:x,selectedDex:y,setSelectedDex:h,isDropdownOpen:b,setIsDropdownOpen:f,buyAmount:g,setBuyAmount:v,sellAmount:j,setSellAmount:N,handleTradeSubmit:w,isLoading:k,getScriptName:S,countActiveWallets:E,currentMarketCap:C,tokenBalances:F})=>{const[T,A]=e.useState({x:0,y:0}),[M,L]=e.useState(!1),[D,I]=e.useState(null),U=e.useRef(null),$=e.useRef(null),z=[{id:"degen",label:"DEGEN",buyPresets:["0.01","0.05","0.1","0.5"],sellPresets:["25","50","75","100"]},{id:"diamond",label:"DIAMOND",buyPresets:["0.001","0.01","0.05","0.1"],sellPresets:["10","25","50","75"]},{id:"yolo",label:"YOLO",buyPresets:["0.1","0.5","1","5"],sellPresets:["50","75","90","100"]}],R=(()=>{try{const e=document.cookie.split("; ").find(e=>e.startsWith("tradingPresets="))?.split("=")[1];if(e){const r=decodeURIComponent(e),t=JSON.parse(r);return{tabs:Array.isArray(t.tabs)?t.tabs:z,activeTabId:t.activeTabId||"degen"}}}catch(e){}return{tabs:z,activeTabId:"degen"}})(),[W,B]=e.useState(R.tabs),[K,Y]=e.useState(R.activeTabId),H=W.find(e=>e.id===K)||W[0];e.useEffect(()=>{((e,r)=>{try{const t={tabs:e,activeTabId:r},a=encodeURIComponent(JSON.stringify(t)),s=new Date;s.setFullYear(s.getFullYear()+1),document.cookie=`tradingPresets=${a}; expires=${s.toUTCString()}; path=/`}catch(t){}})(W,K)},[W,K]);const[J,_]=e.useState(null);e.useEffect(()=>{},[t,m,y]),e.useEffect(()=>{_(null)},[m]);const G=e.useCallback(async(e,r)=>{const t=D||y;r?(v(e),w(x,r,t,e,void 0)):(N(e),w(x,r,t,void 0,e))},[D,y,x,v,N,w]),V=u.useCallback(e=>{if(!d)return;const r=e.clientX-T.x,t=e.clientY-T.y,a=window.innerWidth-(U.current?.offsetWidth||0),s=window.innerHeight-(U.current?.offsetHeight||0);c({x:Math.max(0,Math.min(r,a)),y:Math.max(0,Math.min(t,s))})},[d,T.x,T.y,c]),q=u.useCallback(()=>{p(!1)},[p]);return e.useEffect(()=>{if(d)return document.addEventListener("mousemove",V),document.addEventListener("mouseup",q),()=>{document.removeEventListener("mousemove",V),document.removeEventListener("mouseup",q)}},[d,V,q]),t?r.jsx("div",{ref:U,className:"fixed z-[9999] select-none",style:{left:o.x,top:o.y,cursor:d?"grabbing":"default"},onMouseDown:e=>{if(!$.current?.contains(e.target))return;p(!0);const r=U.current?.getBoundingClientRect();r&&A({x:e.clientX-r.left,y:e.clientY-r.top})},children:r.jsxs("div",{className:"relative overflow-hidden p-4 rounded-lg w-80 max-w-[90vw] bg-app-primary-99 backdrop-blur-md border border-app-primary-30 shadow-lg shadow-black-80",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("div",{ref:$,className:"flex items-center gap-1 cursor-grab active:cursor-grabbing",title:"Drag to move",children:r.jsx(a,{size:12,className:"text-app-secondary-60"})}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>L(!M),className:"p-1.5 rounded transition-all duration-200\n                        "+(M?"bg-primary-20 border border-app-primary color-primary":"hover:bg-primary-20 text-app-secondary-60 hover:color-primary"),children:M?r.jsx(i,{size:12}):r.jsx(l,{size:12})}),r.jsx("button",{onClick:s,className:"p-1 rounded hover:bg-primary-20 transition-colors",children:r.jsx(n,{size:14,className:"text-app-secondary-60 hover:color-primary"})})]})]}),r.jsx("div",{className:"flex gap-1 mb-4",children:W.map(e=>r.jsx(P,{label:e.label,isActive:K===e.id,onClick:()=>{return r=e.id,void Y(r);var r},onEdit:r=>((e,r)=>{B(t=>t.map(t=>t.id===e?{...t,label:r}:t))})(e.id,r),isEditMode:M},e.id))}),r.jsxs("div",{className:"space-y-4 relative z-10",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-mono color-primary",children:"BUY"}),r.jsx("span",{className:"text-xs text-app-secondary-60 font-mono",children:"SOL/wallet"})]}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:H.buyPresets.map((e,t)=>r.jsx(O,{value:e,onExecute:e=>G(e,!0),onChange:e=>((e,r)=>{B(t=>t.map(t=>t.id===K?{...t,buyPresets:t.buyPresets.map((t,a)=>a===e?r:t)}:t))})(t,e),isLoading:k,variant:"buy",isEditMode:M,index:t},t))})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm font-mono text-error-alt",children:"SELL"}),r.jsx("span",{className:"text-xs text-error-alt-60 font-mono",children:"% tokens"})]}),r.jsx("div",{className:"grid grid-cols-4 gap-2",children:H.sellPresets.map((e,t)=>r.jsx(O,{value:e,onExecute:e=>G(e,!1),onChange:e=>((e,r)=>{B(t=>t.map(t=>t.id===K?{...t,sellPresets:t.sellPresets.map((t,a)=>a===e?r:t)}:t))})(t,e),isLoading:k,variant:"sell",isEditMode:M,index:t},t))})]})]})]})}):null}},Symbol.toStringTag,{value:"Module"}));export{D as F,L as P,M as T};
