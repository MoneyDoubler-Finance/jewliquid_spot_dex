import{j as e,T as r,r as a,U as t,P as s,a as o,X as l,e as n,aa as i,D as c,ah as p,ai as d,R as m,a7 as u,aj as x,ak as y,al as b,am as h,S as f,W as v,b as g,i as j,s as N}from"./chunk-Cz6_pBX-.js";import{L as w,M as k,l as C}from"./chunk-BUghWDZR.js";import{e as A}from"./chunk-DOuxrLs8.js";import"./chunk-XUcrMwUP.js";import"./chunk-B1AVVccc.js";import"./chunk-CpRZEEmg.js";import"./chunk-DOG0fR8U.js";import"./chunk-Byzhx8yX.js";const S=()=>`strategy_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,T=({condition:a,index:t,onUpdate:s,onRemove:o})=>e.jsxs("div",{className:"bg-app-accent border border-app-primary-40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"font-mono text-sm color-primary",children:["Condition ",t+1]}),e.jsx("button",{onClick:o,className:"p-1 rounded hover:bg-error-alt-60 transition-colors",children:e.jsx(r,{className:"w-4 h-4 text-app-secondary-60 hover:text-error-alt"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Type"}),e.jsx("select",{value:a.type,onChange:e=>s({type:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:"marketCap",label:"Market Cap"},{value:"buyVolume",label:"Buy Volume"},{value:"sellVolume",label:"Sell Volume"},{value:"netVolume",label:"Net Volume"},{value:"lastTradeAmount",label:"Last Trade Amount"},{value:"lastTradeType",label:"Last Trade Type"},{value:"whitelistActivity",label:"Whitelist Activity"}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Operator"}),e.jsx("select",{value:a.operator,onChange:e=>s({operator:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:"greater",label:">"},{value:"less",label:"<"},{value:"equal",label:"="},{value:"greaterEqual",label:">="},{value:"lessEqual",label:"<="}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"lastTradeType"===a.type?"Trade Type":"whitelistActivity"===a.type?"Activity Type":"Value"}),"lastTradeType"===a.type?e.jsxs("select",{value:a.value,onChange:e=>s({value:Number(e.target.value)}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[e.jsx("option",{value:1,children:"Buy"}),e.jsx("option",{value:0,children:"Sell"})]}):"whitelistActivity"===a.type?e.jsxs("select",{value:a.whitelistActivityType||"buyVolume",onChange:e=>s({whitelistActivityType:e.target.value,value:1}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[e.jsx("option",{value:"buyVolume",children:"Buy Volume"}),e.jsx("option",{value:"sellVolume",children:"Sell Volume"}),e.jsx("option",{value:"netVolume",children:"Net Volume"}),e.jsx("option",{value:"lastTradeAmount",children:"Last Trade Amount"}),e.jsx("option",{value:"lastTradeType",children:"Last Trade Type"})]}):e.jsx("input",{type:"number",value:a.value,onChange:e=>s({value:Number(e.target.value)}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"whitelistActivity"===a.type?"Whitelist Address":"Timeframe"}),"whitelistActivity"===a.type?e.jsx("input",{type:"text",value:a.whitelistAddress||"",onChange:e=>s({whitelistAddress:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"Enter wallet address"}):e.jsx("select",{value:a.timeframe||0,onChange:e=>s({timeframe:Number(e.target.value)}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:0,label:"Current"},{value:1,label:"Last 1 minute"},{value:5,label:"Last 5 minutes"},{value:15,label:"Last 15 minutes"},{value:60,label:"Last 1 hour"}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]})]}),V=({action:a,index:t,onUpdate:s,onRemove:o})=>e.jsxs("div",{className:"bg-app-accent border border-app-primary-40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"font-mono text-sm color-primary",children:["Action ",t+1]}),e.jsx("button",{onClick:o,className:"p-1 rounded hover:bg-error-alt-60 transition-colors",children:e.jsx(r,{className:"w-4 h-4 text-app-secondary-60 hover:text-error-alt"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Action"}),e.jsx("select",{value:a.type,onChange:e=>s({type:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:"buy",label:"Buy"},{value:"sell",label:"Sell"}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Amount Type"}),e.jsx("select",{value:a.amountType,onChange:e=>s({amountType:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:"percentage",label:"Percentage of Balance"},{value:"sol",label:"Fixed Amount (SOL)"},{value:"lastTrade",label:"Last Trade Amount"},{value:"volume",label:"Volume-based Amount"},{value:"whitelistVolume",label:"Whitelist Volume-based Amount"}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),("sol"===a.amountType||"percentage"===a.amountType)&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"percentage"===a.amountType?"Percentage (%)":"Amount (SOL)"}),e.jsx("input",{type:"number",value:a.amount,onChange:e=>s({amount:Number(e.target.value)}),min:"0",max:"percentage"===a.amountType?100:void 0,step:"percentage"===a.amountType?1:.01,className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"percentage"===a.amountType?"10":"0.1"})]}),"lastTrade"===a.amountType&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Multiplier"}),e.jsx("input",{type:"number",value:a.amount,onChange:e=>s({amount:Number(e.target.value)}),min:"0",step:"0.1",className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"1.0"}),e.jsx("div",{className:"text-xs text-app-secondary-60 mt-1",children:"Amount = Last Trade × Multiplier"})]}),"volume"===a.amountType&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Volume Type"}),e.jsx("select",{value:a.volumeType||"buyVolume",onChange:e=>s({volumeType:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:"buyVolume",label:"Buy Volume"},{value:"sellVolume",label:"Sell Volume"},{value:"netVolume",label:"Net Volume"}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]}),"whitelistVolume"===a.amountType&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Whitelist Address"}),e.jsx("input",{type:"text",value:a.whitelistAddress||"",onChange:e=>s({whitelistAddress:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"Enter wallet address"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Activity Type"}),e.jsx("select",{value:a.whitelistActivityType||"buyVolume",onChange:e=>s({whitelistActivityType:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[{value:"buyVolume",label:"Buy Volume"},{value:"sellVolume",label:"Sell Volume"},{value:"netVolume",label:"Net Volume"}].map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Slippage (%)"}),e.jsx("input",{type:"number",value:a.slippage,onChange:e=>s({slippage:Number(e.target.value)}),min:"0",max:"100",step:"0.1",className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"5"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Priority"}),e.jsxs("select",{value:a.priority,onChange:e=>s({priority:e.target.value}),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",children:[e.jsx("option",{value:"low",children:"Low"}),e.jsx("option",{value:"medium",children:"Medium"}),e.jsx("option",{value:"high",children:"High"})]})]})]}),("volume"===a.amountType||"whitelistVolume"===a.amountType)&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"block text-xs font-mono color-primary mb-1",children:"Volume Multiplier"}),e.jsx("input",{type:"number",value:a.volumeMultiplier||.1,onChange:e=>s({volumeMultiplier:Number(e.target.value)}),min:"0",max:"1",step:"0.01",className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"0.1"}),e.jsx("div",{className:"text-xs text-app-secondary-60 mt-1",children:"volume"===a.amountType?`Amount = ${a.volumeType||"buyVolume"} × Multiplier`:`Amount = Whitelist ${a.whitelistActivityType||"any"} Volume × Multiplier`})]})]}),L="whitelistLists",E=()=>{try{const e=localStorage.getItem(L);if(e)return JSON.parse(e)}catch(e){}return[]},$=e=>{try{localStorage.setItem(L,JSON.stringify(e))}catch(r){}},D=(e,r)=>({id:`list_${Date.now()}`,name:e.trim(),addresses:[...r],createdAt:Date.now(),updatedAt:Date.now()}),M=({onSelectList:d,currentAddresses:m=[]})=>{const[u,x]=a.useState([]),[y,b]=a.useState(!1),[h,f]=a.useState(""),[v,g]=a.useState(null),[j,N]=a.useState(""),w=a.useRef(null);a.useEffect(()=>{const e=E();x(e)},[]),a.useEffect(()=>{$(u)},[u]);const k=e=>{if(!j.trim())return;const r=u.find(r=>r.id===e);if(r){const e=(e=>{const r=E().map(r=>r.id===e.id?{...e,updatedAt:Date.now()}:r);return $(r),r})({...r,name:j.trim()});x(e)}g(null),N("")},C=e=>{const r=(e=>{const r=E().filter(r=>r.id!==e);return $(r),r})(e);x(r)};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-sm font-mono font-semibold color-primary",children:"Saved Whitelist Lists"}),y?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"px-2 py-1 bg-app-primary border border-app-primary-40 rounded font-mono text-xs color-primary focus:outline-none focus:border-app-primary",placeholder:"List name"}),e.jsx("button",{onClick:()=>{if(!h.trim()||0===m.length)return;const e=D(h,m);x([...u,e]),f(""),b(!1)},disabled:!h.trim()||0===m.length,className:"p-1 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(o,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>{b(!1),f("")},className:"p-1 border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors",children:e.jsx(l,{className:"w-3 h-3"})})]}):e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>w.current?.click(),className:"px-2 py-1 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-1",title:"Import list from TXT file",children:[e.jsx(t,{className:"w-3 h-3"}),"Import"]}),e.jsxs("button",{onClick:()=>b(!0),className:"px-2 py-1 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-1",children:[e.jsx(s,{className:"w-3 h-3"}),"Save Current List"]}),e.jsx("input",{type:"file",ref:w,onChange:e=>{const r=e.target.files?.[0];if(!r)return;const a=new FileReader;a.onload=e=>{const a=e.target?.result;if(!a)return;const t=a.split(/\r?\n/).filter(e=>""!==e.trim());if(t.length>0){const e=r.name.replace(/\.txt$/,"").replace(/[_-]/g," "),a=D(e,t);x([...u,a])}},a.readAsText(r),w.current&&(w.current.value="")},accept:".txt",className:"hidden"})]})]}),0===u.length?e.jsx("div",{className:"text-center py-3 text-app-secondary-60 font-mono text-xs",children:"No saved lists. Create one by saving your current whitelist."}):e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto pr-1",children:u.map(a=>e.jsx("div",{className:"flex items-center justify-between bg-app-primary-20 p-2 rounded border border-app-primary-40",children:v===a.id?e.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[e.jsx("input",{type:"text",value:j,onChange:e=>N(e.target.value),className:"px-2 py-1 bg-app-primary border border-app-primary-40 rounded font-mono text-xs color-primary focus:outline-none focus:border-app-primary flex-1"}),e.jsx("button",{onClick:()=>k(a.id),disabled:!j.trim(),className:"p-1 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(n,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>{g(null),N("")},className:"p-1 border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors",children:e.jsx(l,{className:"w-3 h-3"})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-mono text-xs color-primary",children:a.name}),e.jsxs("div",{className:"text-xs text-app-secondary-60",children:[a.addresses.length," addresses"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsxs("button",{onClick:()=>{return e=a.addresses,void(d&&d(e));var e},className:"p-1 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors flex items-center",title:"Use this list",children:[e.jsx(i,{className:"w-3 h-3"}),e.jsx("span",{className:"ml-1",children:"Select"})]}),e.jsx("button",{onClick:()=>(e=>{const r=e.addresses.join("\n"),a=new Blob([r],{type:"text/plain"}),t=URL.createObjectURL(a),s=document.createElement("a");s.href=t,s.download=`${e.name.replace(/\s+/g,"_")}_addresses.txt`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(t)})(a),className:"p-1 border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors",title:"Export as TXT",children:e.jsx(c,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>(e=>{g(e.id),N(e.name)})(a),className:"p-1 border border-app-primary-40 rounded color-primary font-mono text-xs hover:bg-app-primary hover:border-app-primary transition-colors",title:"Edit list name",children:e.jsx(p,{className:"w-3 h-3"})}),e.jsx("button",{onClick:()=>C(a.id),className:"p-1 border border-error-alt-40 rounded text-error-alt font-mono text-xs hover:bg-error-20 hover:border-error-alt transition-colors",title:"Delete list",children:e.jsx(r,{className:"w-3 h-3"})})]})]})},a.id))})]})},O=({strategy:r,onSave:t,onCancel:n})=>{const[i,c]=a.useState(r?.name||""),[p,m]=a.useState(r?.description||""),[u,x]=a.useState(r?.conditions||[]),[y,b]=a.useState(r?.actions||[]),[h,f]=a.useState(r?.cooldown||5),[v,g]=a.useState(r?.maxExecutions||void 0),[j,N]=a.useState(r?.isActive||!1),[w,k]=a.useState(r?.whitelistedAddresses||[]),[C,A]=a.useState(""),[L,E]=a.useState(!1),$=a.useRef(null);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-mono color-primary mb-2",children:"Strategy Name"}),e.jsx("input",{type:"text",value:i,onChange:e=>c(e.target.value),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"e.g., Buy on High Volume"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-mono color-primary mb-2",children:"Description"}),e.jsx("input",{type:"text",value:p,onChange:e=>m(e.target.value),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"Brief description of the strategy"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-mono color-primary mb-2",children:"Cooldown (minutes)"}),e.jsx("input",{type:"number",value:h,onChange:e=>f(Number(e.target.value)),min:"1",className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-mono color-primary mb-2",children:"Max Executions (optional)"}),e.jsx("input",{type:"number",value:v||"",onChange:e=>g(e.target.value?Number(e.target.value):void 0),min:"1",className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"Unlimited"})]}),e.jsx("div",{className:"flex items-center",children:e.jsxs("label",{className:"flex items-center gap-2 font-mono text-sm color-primary",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:e=>N(e.target.checked),className:"rounded"}),"Start Active"]})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("label",{className:"block text-sm font-mono color-primary",children:"Whitelist Addresses"}),e.jsxs("button",{onClick:()=>E(!L),className:"flex items-center text-app-accent hover:text-app-primary transition-colors font-mono text-xs",children:[e.jsx(d,{className:"w-3 h-3 mr-1"}),e.jsx("span",{children:"Saved Lists"})]})]}),L&&e.jsx("div",{className:"mb-4 p-3 border border-app-primary-40 rounded bg-app-primary",children:e.jsx(M,{onSelectList:e=>{k(e),E(!1)},currentAddresses:w})}),e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"text",value:C,onChange:e=>A(e.target.value),className:"w-full px-2 py-1.5 bg-app-primary border border-app-primary-40 rounded font-mono text-sm color-primary focus:outline-none focus:border-app-primary",placeholder:"Enter wallet address"}),e.jsx("button",{onClick:()=>{C&&!w.includes(C)&&(k([...w,C]),A(""))},className:"px-3 py-2 bg-app-accent border border-app-primary-40 rounded-r font-mono text-sm color-primary hover:bg-app-primary hover:border-app-primary transition-colors",children:"Add"})]}),e.jsx("div",{className:"text-xs text-app-secondary-60 mb-2",children:"Add addresses to track for whitelist-based conditions and actions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:w.map((r,a)=>e.jsxs("div",{className:"flex items-center bg-app-accent px-2 py-1 rounded border border-app-primary-40",children:[e.jsx("span",{className:"font-mono text-xs truncate max-w-[150px]",children:r}),e.jsx("button",{onClick:()=>{const e=[...w];e.splice(a,1),k(e)},className:"ml-1 p-0.5 rounded hover:bg-app-primary transition-colors",children:e.jsx(l,{className:"w-3 h-3 text-app-secondary-60"})})]},a))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-mono font-semibold color-primary",children:"Conditions"}),e.jsxs("button",{onClick:()=>{const e={id:`condition_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"marketCap",operator:"greater",value:1e6,timeframe:5};x([...u,e])},className:"px-3 py-1.5 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-2",children:[e.jsx(s,{className:"w-4 h-4"}),"Add Condition"]})]}),e.jsxs("div",{className:"space-y-3",children:[u.map((r,a)=>e.jsx(T,{condition:r,index:a,onUpdate:e=>((e,r)=>{x(u.map(a=>a.id===e?{...a,...r}:a))})(r.id,e),onRemove:()=>{return e=r.id,void x(u.filter(r=>r.id!==e));var e}},r.id)),0===u.length&&e.jsx("div",{className:"text-center py-4 text-app-secondary-60 font-mono text-sm",children:'No conditions added. Click "Add Condition" to create your first rule.'})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-mono font-semibold color-primary",children:"Actions"}),e.jsxs("button",{onClick:()=>{const e={id:`action_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"buy",amount:10,amountType:"percentage",volumeType:"buyVolume",volumeMultiplier:.1,slippage:5,priority:"medium"};b([...y,e])},className:"px-3 py-1.5 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-2",children:[e.jsx(s,{className:"w-4 h-4"}),"Add Action"]})]}),e.jsxs("div",{className:"space-y-3",children:[y.map((r,a)=>e.jsx(V,{action:r,index:a,onUpdate:e=>((e,r)=>{b(y.map(a=>a.id===e?{...a,...r}:a))})(r.id,e),onRemove:()=>{return e=r.id,void b(y.filter(r=>r.id!==e));var e}},r.id)),0===y.length&&e.jsx("div",{className:"text-center py-4 text-app-secondary-60 font-mono text-sm",children:'No actions added. Click "Add Action" to define what should happen.'})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t border-app-primary-40",children:[e.jsx("input",{type:"file",ref:$,onChange:e=>{const r=e.target.files?.[0];if(!r)return;const a=new FileReader;a.onload=e=>{try{const r=e.target?.result;if(!r)return;const a=JSON.parse(r);c(a.name||""),m(a.description||""),x(a.conditions||[]),b(a.actions||[]),f(a.cooldown||5),g(a.maxExecutions),N(a.isActive||!1),k(a.whitelistedAddresses||[]),alert("Strategy imported successfully!")}catch(r){alert("Error importing strategy. Please check the file format.")}},a.readAsText(r),$.current&&($.current.value="")},accept:".json",className:"hidden"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:n,className:"px-4 py-2 border border-app-primary-40 rounded font-mono text-sm text-app-secondary-60 hover:bg-app-primary-60 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:()=>{if(!i.trim()||0===u.length||0===y.length)return void alert("Please provide a name, at least one condition, and at least one action.");const e={id:r?.id||S(),name:i.trim(),description:p.trim(),conditions:u,conditionLogic:"and",actions:y,isActive:j,cooldown:h,maxExecutions:v,executionCount:r?.executionCount||0,lastExecuted:r?.lastExecuted,createdAt:r?.createdAt||Date.now(),updatedAt:Date.now(),whitelistedAddresses:w};t(e)},className:"px-4 py-2 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-2",children:[e.jsx(o,{className:"w-4 h-4"}),r?"Update Strategy":"Create Strategy"]})]})]})]})},U=({isOpen:o,onClose:n,position:i,onPositionChange:d,isDragging:T,onDraggingChange:V,tokenAddress:L,wallets:E,solBalances:$,tokenBalances:D,nonWhitelistedTrades:M,iframeData:U})=>{const[B,R]=a.useState({x:0,y:0}),[F,W]=a.useState(!1),[I,z]=a.useState(0),[P,_]=a.useState(0),[H,K]=a.useState(new Set),[J,q]=a.useState([]),[X,Y]=a.useState(!0),[Z,G]=a.useState(!0),[Q,ee]=a.useState(""),[re,ae]=a.useState("address"),[te,se]=a.useState("asc"),[oe,le]=a.useState("all"),[ne,ie]=a.useState(!1),[ce,pe]=a.useState("data"),[de,me]=a.useState([]),[ue,xe]=a.useState(!1),[ye,be]=a.useState(null),[he,fe]=a.useState(!1),[ve,ge]=a.useState([]),je=a.useRef(null),Ne=a.useRef(null),we=a.useRef(null),ke=e=>`${e.slice(0,6)}...${e.slice(-4)}`,Ce=e=>e.toFixed(4),Ae=e=>$.has(e)?$.get(e):0,Se=e=>D.has(e)?D.get(e):0,Te=e=>ne?(e=>{const r=U?.solPrice||0;if(!r||0===r)return"$--";const a=e*r;return a>=1e6?`$${(a/1e6).toFixed(2)}M`:a>=1e3?`$${(a/1e3).toFixed(2)}K`:`$${a.toFixed(2)}`})(e):`${e.toFixed(4)} SOL`,Ve=e=>(Ae(e)||0)<.01,Le=()=>{W(!1),d({x:window.innerWidth/2-400,y:window.innerHeight/2-300})},Ee=e=>{me(r=>r.map(r=>({...r,isActive:e})))},$e=(e,r)=>{if(!e.isActive||0===e.conditions.length)return!1;if(e.lastExecuted){if(Date.now()-e.lastExecuted<60*e.cooldown*1e3)return!1}if(e.maxExecutions&&e.executionCount>=e.maxExecutions)return!1;const a=e.conditions.map((e,a)=>{const t=((e,r)=>{let a,t;if("whitelistActivity"===e.type&&e.whitelistAddress){const t=e.whitelistAddress,s=r.whitelistActivity?.[t];if(!s)return!1;switch(e.whitelistActivityType){case"buyVolume":a=s.buyVolume;break;case"sellVolume":a=s.sellVolume;break;case"netVolume":a=s.netVolume;break;case"lastTradeAmount":a=s.lastTrade?.solAmount||0;break;case"lastTradeType":a="buy"===s.lastTrade?.type?1:0;break;default:return!1}}else switch(e.type){case"marketCap":a=r.marketCap;break;case"buyVolume":a=r.buyVolume;break;case"sellVolume":a=r.sellVolume;break;case"netVolume":a=r.netVolume;break;case"lastTradeAmount":a=r.lastTrade?.solAmount||0;break;case"priceChange":a=0;break;case"lastTradeType":a="buy"===r.lastTrade?.type?1:0;break;default:return!1}switch(e.operator){case"greater":t=a>e.value;break;case"less":t=a<e.value;break;case"equal":t=Math.abs(a-e.value)<1e-4;break;case"greaterEqual":t=a>=e.value;break;case"lessEqual":t=a<=e.value;break;default:return!1}return t})(e,r);return t});return"and"===e.conditionLogic?a.every(e=>e):a.some(e=>e)};a.useEffect(()=>{const e=w();e.length>0&&me(e)},[]),a.useEffect(()=>{de.length>0&&k(de)},[de]),a.useEffect(()=>{z(0),_(0),K(new Set)},[L]),a.useEffect(()=>{M.forEach(e=>{H.has(e.signature)||(K(r=>new Set(r).add(e.signature)),"buy"===e.type?z(r=>r+e.solAmount):"sell"===e.type&&_(r=>r+e.solAmount))})},[M,H]),a.useEffect(()=>{const e=()=>{F&&d({x:window.innerWidth-200,y:window.innerHeight-80})};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[F,d]),a.useEffect(()=>{if(we.current&&(clearInterval(we.current),we.current=null),0===de.length)return;if(0===de.filter(e=>e.isActive).length)return;return we.current=setInterval(()=>{0;const e=(()=>{const e=M.filter(e=>e.tokenMint===L).sort((e,r)=>r.timestamp-e.timestamp)[0]||null,r={},a=new Set;return de.forEach(e=>{e.isActive&&e.whitelistedAddresses&&e.whitelistedAddresses.forEach(e=>a.add(e))}),a.forEach(e=>{const a=M.filter(r=>r.tokenMint===L&&(r.walletAddress?.toLowerCase()===e.toLowerCase()||r.address.toLowerCase()===e.toLowerCase())),t=a.filter(e=>"buy"===e.type),s=a.filter(e=>"sell"===e.type),o=t.reduce((e,r)=>e+r.solAmount,0),l=s.reduce((e,r)=>e+r.solAmount,0);r[e]={buyVolume:o,sellVolume:l,netVolume:o-l,lastTrade:a.sort((e,r)=>r.timestamp-e.timestamp)[0]||null}}),{marketCap:U?.marketCap||0,buyVolume:I,sellVolume:P,netVolume:I-P,lastTrade:e,tokenPrice:U?.tokenPrice?.tokenPrice||0,priceChange24h:0,whitelistActivity:r}})();de.filter(e=>e.isActive).forEach(r=>{0!==J.length&&$e(r,e)&&De(r,e)})},5e3),()=>{we.current&&(clearInterval(we.current),we.current=null)}},[de,J,L]);const De=async(e,r)=>{try{me(r=>r.map(r=>r.id===e.id?{...r,executionCount:r.executionCount+1,lastExecuted:Date.now()}:r));for(const a of e.actions)await Me(a,e,r);ge(r=>[{strategyId:e.id,timestamp:Date.now(),action:`Executed strategy: ${e.name}`,result:"success",message:`Conditions met, executed ${e.actions.length} action(s)`},...r.slice(0,49)])}catch(a){ge(r=>[{strategyId:e.id,timestamp:Date.now(),action:`Failed to execute strategy: ${e.name}`,result:"error",message:a instanceof Error?a.message:"Unknown error"},...r.slice(0,49)])}},Me=async(e,r,a)=>{const t=J;if(0===t.length)throw new Error("No wallets selected in sidebar for action execution");for(const o of t){const t=Ae(o.address)||0;if(Ve(o.address))continue;let l;if("sol"===e.amountType)l=e.amount;else if("percentage"===e.amountType)l=t*(e.amount/100);else if("lastTrade"===e.amountType){const r=a.lastTrade?.solAmount||0;l=r*e.amount}else if("volume"===e.amountType||"whitelistVolume"===e.amountType){let r;if("whitelistVolume"===e.amountType&&e.whitelistAddress){const t=a.whitelistActivity?.[e.whitelistAddress];if(!t)return;switch(e.whitelistActivityType){case"buyVolume":default:r=t.buyVolume;break;case"sellVolume":r=t.sellVolume;break;case"netVolume":r=t.netVolume}}else switch(e.volumeType){case"buyVolume":default:r=a.buyVolume;break;case"sellVolume":r=a.sellVolume;break;case"netVolume":r=a.netVolume}l=r*(e.volumeMultiplier||.1)}else l=e.amount;try{const a={tokenAddress:L,solAmount:"buy"===e.type?l:void 0,sellPercent:"sell"===e.type?"percentage"===e.amountType?e.amount:100:void 0},t=(o.address,o.privateKey,{id:Date.now(),address:o.address,privateKey:o.privateKey,isActive:!0}),s=await A("auto",[t],a,"buy"===e.type,$);ge(a=>[{strategyId:r.id,timestamp:Date.now(),action:`${e.type.toUpperCase()} ${l.toFixed(4)} SOL`,result:s.success?"success":"error",message:s.success?`Wallet: ${ke(o.address)}, Slippage: ${e.slippage}%`:`Error: ${s.error||"Unknown error"}`},...a.slice(0,49)]),s.success}catch(s){ge(a=>[{strategyId:r.id,timestamp:Date.now(),action:`${e.type.toUpperCase()} ${l.toFixed(4)} SOL`,result:"error",message:`Error: ${s instanceof Error?s.message:"Unknown error"}`},...a.slice(0,49)])}}},Oe=()=>{const e=J.map(e=>e.privateKey);return E.filter(r=>!e.includes(r.privateKey))},Ue=e=>{const r=e.target;if(!Ne.current?.contains(r))return;V(!0);const a=je.current?.getBoundingClientRect();a&&R({x:e.clientX-a.left,y:e.clientY-a.top})},Be=m.useCallback(e=>{if(!T)return;const r=e.clientX-B.x,a=e.clientY-B.y,t=window.innerWidth-(je.current?.offsetWidth||0),s=window.innerHeight-(je.current?.offsetHeight||0);d({x:Math.max(0,Math.min(r,t)),y:Math.max(0,Math.min(a,s))})},[T,B.x,B.y,d]),Re=m.useCallback(()=>{V(!1)},[V]);return a.useEffect(()=>{if(T)return document.addEventListener("mousemove",Be),document.addEventListener("mouseup",Re),()=>{document.removeEventListener("mousemove",Be),document.removeEventListener("mouseup",Re)}},[T,Be,Re]),o?F?e.jsx("div",{ref:je,className:"fixed z-[9999] select-none",style:{left:i.x,top:i.y,cursor:T?"grabbing":"default"},onMouseDown:Ue,children:e.jsxs("div",{className:"relative overflow-hidden rounded-lg w-48 bg-app-primary-99 backdrop-blur-md border border-app-primary-30 shadow-lg shadow-black-80",children:[e.jsxs("div",{className:"flex items-center justify-between p-2 border-b border-app-primary-30",children:[e.jsxs("div",{ref:Ne,className:"flex items-center gap-1 cursor-grab active:cursor-grabbing flex-1",title:"Drag to move",children:[e.jsx(u,{size:12,className:"text-app-secondary-60"}),e.jsx("span",{className:"text-xs font-mono font-semibold color-primary truncate",children:"Automation"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:Le,className:"p-1 rounded hover:bg-primary-20 transition-colors",title:"Maximize",children:e.jsx(x,{size:12,className:"text-app-secondary-60 hover:color-primary"})}),e.jsx("button",{onClick:n,className:"p-1 rounded hover:bg-primary-20 transition-colors",title:"Close",children:e.jsx(l,{size:12,className:"text-app-secondary-60 hover:color-primary"})})]})]}),e.jsxs("div",{className:"p-2 space-y-2",children:[e.jsxs("div",{className:"text-xs text-app-secondary-60 font-mono",children:["Strategies: ",de.filter(e=>e.isActive).length,"/",de.length]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("button",{onClick:()=>Ee(!0),className:"flex-1 px-2 py-1 bg-app-accent text-white rounded text-xs font-mono hover:bg-app-accent-80 transition-colors flex items-center justify-center gap-1",title:"Start All Strategies",children:[e.jsx(y,{size:10}),"Start"]}),e.jsxs("button",{onClick:()=>Ee(!1),className:"flex-1 px-2 py-1 bg-error-alt text-white rounded text-xs font-mono hover:bg-error-alt-80 transition-colors flex items-center justify-center gap-1",title:"Stop All Strategies",children:[e.jsx(b,{size:10}),"Stop"]})]}),e.jsxs("div",{className:"text-xs text-app-secondary-60 font-mono",children:["Wallets: ",J.length]})]})]})}):e.jsx("div",{ref:je,className:"fixed z-[9999] select-none",style:{left:i.x,top:i.y,cursor:T?"grabbing":"default"},onMouseDown:Ue,children:e.jsxs("div",{className:"relative overflow-hidden rounded-lg min-w-[800px] max-w-[1200px] h-[600px] bg-app-primary-99 backdrop-blur-md border border-app-primary-30 shadow-lg shadow-black-80 flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-app-primary-30",children:[e.jsxs("div",{ref:Ne,className:"flex items-center gap-2 cursor-grab active:cursor-grabbing",title:"Drag to move",children:[e.jsx(u,{size:16,className:"text-app-secondary-60"}),e.jsx("h3",{className:"text-lg font-mono font-semibold color-primary",children:"Token Automation"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>{W(!0),d({x:window.innerWidth-200,y:window.innerHeight-80})},className:"p-1.5 rounded hover:bg-primary-20 transition-colors",title:"Minimize",children:e.jsx(h,{size:16,className:"text-app-secondary-60 hover:color-primary"})}),e.jsx("button",{onClick:n,className:"p-1.5 rounded hover:bg-primary-20 transition-colors",title:"Close",children:e.jsx(l,{size:16,className:"text-app-secondary-60 hover:color-primary"})})]})]}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex border-b border-app-primary-30 bg-app-primary",children:[e.jsx("button",{onClick:()=>pe("data"),className:"px-4 py-3 font-mono text-sm transition-colors "+("data"===ce?"color-primary border-b-2 border-app-primary bg-app-primary-60":"text-app-secondary-60 hover:color-primary hover:bg-app-primary-60"),children:"Market Data"}),e.jsxs("button",{onClick:()=>pe("strategies"),className:"px-4 py-3 font-mono text-sm transition-colors flex items-center gap-2 "+("strategies"===ce?"color-primary border-b-2 border-app-primary bg-app-primary-60":"text-app-secondary-60 hover:color-primary hover:bg-app-primary-60"),children:[e.jsx(f,{className:"w-4 h-4"}),"Trading Strategies (",de.length,")"]})]}),e.jsxs("div",{className:"flex-1 p-4 overflow-y-auto",children:["data"===ce&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{className:"text-lg font-mono font-semibold color-primary",children:"Latest Data"}),e.jsx("button",{onClick:()=>{z(0),_(0),K(new Set)},className:"px-3 py-1.5 bg-app-tertiary border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-secondary hover:border-app-primary transition-colors",children:"Reset Volume"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-app-primary-60 border border-app-primary-40 p-4 rounded-lg cursor-pointer hover:bg-app-primary-40 transition-colors",onClick:()=>ie(!ne),title:"Click to toggle between SOL and USD",children:[e.jsx("div",{className:"text-sm text-app-secondary-60 font-mono mb-1",children:"Total Buy Volume"}),e.jsx("div",{className:"color-primary font-mono font-semibold",children:Te(I)})]}),e.jsxs("div",{className:"bg-app-primary-60 border border-error-alt-40 p-4 rounded-lg cursor-pointer hover:bg-app-primary-40 transition-colors",onClick:()=>ie(!ne),title:"Click to toggle between SOL and USD",children:[e.jsx("div",{className:"text-sm text-error-alt-60 font-mono mb-1",children:"Total Sell Volume"}),e.jsx("div",{className:"text-error-alt font-mono font-semibold",children:Te(P)})]}),e.jsxs("div",{className:"bg-app-primary-60 border border-app-primary-40 p-4 rounded-lg cursor-pointer hover:bg-app-primary-40 transition-colors",onClick:()=>ie(!ne),title:"Click to toggle between SOL and USD",children:[e.jsx("div",{className:"text-sm text-app-secondary-60 font-mono mb-1",children:"Net Volume"}),e.jsx("div",{className:"font-mono font-semibold "+(I-P>=0?"text-app-accent":"text-error-alt"),children:Te(I-P)})]})]}),e.jsx("div",{className:"bg-app-primary border border-app-primary-40 rounded-lg p-4 cursor-pointer hover:bg-app-primary-60 transition-colors",onClick:()=>ie(!ne),title:"Click to toggle between SOL and USD",children:(()=>{const r=M.filter(e=>e.tokenMint===L).sort((e,r)=>r.timestamp-e.timestamp)[0];return r?e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs font-mono font-semibold "+("buy"===r.type?"bg-app-primary-60 border border-app-primary-40 color-primary":"bg-app-primary-60 border border-error-alt-40 text-error-alt"),children:r.type.toUpperCase()}),e.jsx("span",{className:"color-primary font-mono font-semibold",children:Te(r.solAmount)})]}),e.jsxs("div",{className:"text-sm text-app-secondary-60 font-mono",children:["Avg: ",(t=r.avgPrice,!t||0===t||"number"!=typeof t||isNaN(t)?"$--":t<1e-6?`$${t.toExponential(2)}`:t<.01?`$${t.toFixed(6)}`:`$${t.toFixed(4)}`)," | ",(a=r.marketCap,!a||0===a||"number"!=typeof a||isNaN(a)?"--":a>=1e9?`$${(a/1e9).toFixed(2)}B`:a>=1e6?`$${(a/1e6).toFixed(2)}M`:a>=1e3?`$${(a/1e3).toFixed(2)}K`:`$${a.toFixed(2)}`)," MC"]}),e.jsx("div",{className:"text-xs text-app-secondary-60 font-mono",children:new Date(r.timestamp).toLocaleString()})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:"color-primary font-mono text-sm",children:ke(r.address)})})]}):e.jsx("div",{className:"text-app-secondary-60 font-mono text-center py-4",children:"No non-whitelisted trades found for this token"});var a,t})()})]})]}),"strategies"===ce&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-lg font-mono font-semibold color-primary",children:"Trading Strategies"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:()=>{const e=document.createElement("input");e.type="file",e.accept=".json",e.style.display="none",e.onchange=r=>{const a=r.target,t=a.files?.[0];if(!t)return;const s=new FileReader;s.onload=e=>{try{const r=e.target?.result;if(!r)return;const a=JSON.parse(r);me(e=>[...e,{...a,id:a.id||S(),createdAt:a.createdAt||Date.now(),updatedAt:Date.now(),executionCount:a.executionCount||0}]),alert("Strategy imported successfully!")}catch(r){alert("Error importing strategy. Please check the file format.")}},s.readAsText(t),document.body.removeChild(e)},document.body.appendChild(e),e.click()},className:"px-3 py-1.5 border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-primary-40 transition-colors flex items-center gap-2",title:"Import strategy from JSON file",children:[e.jsx(t,{className:"w-4 h-4"}),"Import"]}),e.jsxs("button",{onClick:()=>fe(!he),className:"px-3 py-1.5 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-2",children:[he?e.jsx(l,{className:"w-4 h-4"}):e.jsx(s,{className:"w-4 h-4"}),he?"Cancel":"New Strategy"]})]})]}),he&&e.jsx("div",{className:"bg-app-primary border border-app-primary-40 rounded-lg p-6",children:e.jsx(O,{strategy:null,onSave:e=>{me(r=>[...r,e]),fe(!1)},onCancel:()=>fe(!1)})}),e.jsxs("div",{className:"space-y-3",children:[de.map(a=>e.jsxs("div",{className:"bg-app-primary border border-app-primary-40 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>{me(e=>e.map(e=>e.id===a.id?{...e,isActive:!e.isActive}:e))},className:"p-1 rounded transition-colors "+(a.isActive?"bg-app-accent text-app-primary hover:bg-app-primary-60":"bg-app-primary-60 text-app-secondary-60 hover:bg-app-secondary"),children:a.isActive?e.jsx(b,{className:"w-4 h-4"}):e.jsx(y,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsx("h5",{className:"font-mono font-semibold color-primary",children:a.name}),e.jsx("p",{className:"text-sm text-app-secondary-60 font-mono",children:a.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"px-2 py-1 rounded text-xs font-mono "+(a.isActive?"bg-app-accent text-app-primary":"bg-app-primary-60 text-app-secondary-60"),children:a.isActive?"Active":"Inactive"}),e.jsx("button",{onClick:()=>{const e={...a,updatedAt:Date.now()},r=JSON.stringify(e,null,2),t=new Blob([r],{type:"application/json"}),s=URL.createObjectURL(t),o=document.createElement("a");o.href=s,o.download=`${e.name.replace(/\s+/g,"_")}_strategy.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(s)},className:"p-1 rounded hover:bg-app-primary-60 transition-colors",title:"Export strategy as JSON file",children:e.jsx(c,{className:"w-4 h-4 text-app-secondary-60 hover:color-primary"})}),e.jsx("button",{onClick:()=>{ye?.id===a.id?be(null):(be(a),fe(!1))},className:"p-1 rounded hover:bg-app-primary-60 transition-colors",children:ye?.id===a.id?e.jsx(l,{className:"w-4 h-4 text-app-secondary-60 hover:color-primary"}):e.jsx(p,{className:"w-4 h-4 text-app-secondary-60 hover:color-primary"})}),e.jsx("button",{onClick:()=>{me(e=>e.filter(e=>e.id!==a.id))},className:"p-1 rounded hover:bg-error-alt-60 transition-colors",children:e.jsx(r,{className:"w-4 h-4 text-app-secondary-60 hover:text-error-alt"})})]})]}),ye?.id!==a.id&&e.jsx("div",{className:"mt-3 pt-3 border-t border-app-primary-30",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-app-secondary-60 font-mono",children:"Conditions: "}),e.jsx("span",{className:"color-primary font-mono",children:a.conditions.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-app-secondary-60 font-mono",children:"Actions: "}),e.jsx("span",{className:"color-primary font-mono",children:a.actions.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-app-secondary-60 font-mono",children:"Executions: "}),e.jsx("span",{className:"color-primary font-mono",children:a.executionCount})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-app-secondary-60 font-mono",children:"Cooldown: "}),e.jsxs("span",{className:"color-primary font-mono",children:[a.cooldown,"m"]})]})]})}),ye?.id===a.id&&e.jsx("div",{className:"mt-3 pt-3 border-t border-app-primary-30",children:e.jsx(O,{strategy:ye,onSave:e=>{me(r=>r.map(r=>r.id===ye.id?e:r)),be(null)},onCancel:()=>be(null)})})]},a.id)),0===de.length&&!he&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-app-secondary-60 font-mono mb-4",children:"No trading strategies configured"}),e.jsxs("button",{onClick:()=>fe(!0),className:"px-4 py-2 bg-app-accent border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-primary hover:border-app-primary transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(s,{className:"w-4 h-4"}),"Create Your First Strategy"]})]})]}),ve.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h5",{className:"font-mono font-semibold color-primary",children:"Execution Log"}),e.jsx("div",{className:"bg-app-primary border border-app-primary-40 rounded-lg p-4 max-h-48 overflow-y-auto",children:ve.slice(0,10).map((r,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-app-primary-30 last:border-b-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"w-2 h-2 rounded-full "+("success"===r.result?"bg-app-accent":"bg-error-alt")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-mono text-sm color-primary",children:r.action}),e.jsx("div",{className:"font-mono text-xs text-app-secondary-60",children:r.message})]})]}),e.jsx("div",{className:"text-xs text-app-secondary-60 font-mono",children:new Date(r.timestamp).toLocaleTimeString()})]},a))})]})]})]})]}),Z&&e.jsxs("div",{className:"w-80 border-l border-app-primary-30 bg-app-primary flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-app-primary-30 flex-shrink-0",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h4",{className:"text-lg font-mono font-semibold color-primary flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Wallets"]})}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx(g,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-app-secondary-60"}),e.jsx("input",{type:"text",placeholder:"Search wallets...",value:Q,onChange:e=>ee(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-app-tertiary border border-app-primary-40 rounded-lg color-primary placeholder-app-secondary-60 font-mono text-sm focus:outline-none focus:border-app-primary"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[e.jsxs("select",{value:re,onChange:e=>ae(e.target.value),className:"px-3 py-2 bg-app-tertiary border border-app-primary-40 rounded color-primary font-mono text-sm focus:outline-none focus:border-app-primary",children:[e.jsx("option",{value:"address",children:"Sort by Address"}),e.jsx("option",{value:"balance",children:"Sort by SOL"}),e.jsx("option",{value:"tokenBalance",children:"Sort by Tokens"})]}),e.jsxs("button",{onClick:()=>se(e=>"asc"===e?"desc":"asc"),className:"px-3 py-2 bg-app-tertiary border border-app-primary-40 rounded color-primary font-mono text-sm hover:bg-app-secondary hover:border-app-primary transition-colors flex items-center justify-center gap-1",children:[e.jsx(j,{className:"w-3 h-3 transition-transform "+("desc"===te?"rotate-180":"")}),"asc"===te?"Asc":"Desc"]})]}),e.jsxs("select",{value:oe,onChange:e=>le(e.target.value),className:"w-full px-3 py-2 bg-app-tertiary border border-app-primary-40 rounded color-primary font-mono text-sm focus:outline-none focus:border-app-primary mb-4",children:[e.jsx("option",{value:"all",children:"All Wallets"}),e.jsx("option",{value:"nonZero",children:"Non-Zero SOL"}),e.jsx("option",{value:"highBalance",children:"High Balance (≥0.1 SOL)"}),e.jsx("option",{value:"lowBalance",children:"Low Balance (0.1 SOL)"}),e.jsx("option",{value:"hasTokens",children:"Has Tokens"})]})]}),J.length>0&&e.jsxs("div",{className:"p-4 border-b border-app-primary-30 flex-shrink-0",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("h5",{className:"text-sm font-semibold color-primary flex items-center gap-2 font-mono",children:[e.jsx(N,{className:"w-4 h-4"}),"Selected (",J.length,")"]})}),e.jsx("div",{className:"space-y-2 max-h-40 overflow-y-auto scrollbar-thin scrollbar-thumb-app-primary-40 scrollbar-track-transparent",children:J.map((a,t)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-app-tertiary border border-app-primary-30 rounded",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"color-primary text-sm font-mono truncate",children:ke(a.address)}),e.jsxs("div",{className:"text-xs text-app-secondary-60",children:[Ce(Ae(a.address)||0)," SOL"]})]}),e.jsx("button",{onClick:()=>(e=>{q(r=>r.filter((r,a)=>a!==e))})(t),className:"ml-2 p-1 hover:bg-app-secondary rounded transition-colors",children:e.jsx(r,{className:"w-3 h-3 text-error-alt"})})]},t))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsx("div",{className:"p-4 flex-shrink-0",children:e.jsxs("h5",{className:"text-sm font-semibold color-primary mb-2 font-mono",children:["Available Wallets (",Oe().length,")"]})}),e.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4 min-h-0 scrollbar-thin scrollbar-thumb-app-primary-40 scrollbar-track-transparent hover:scrollbar-thumb-app-primary-60",children:e.jsx("div",{className:"space-y-2",children:((e,r)=>{let a=e;return r&&(a=a.filter(e=>e.address.toLowerCase().includes(r.toLowerCase()))),"all"!==oe&&("nonZero"===oe?a=a.filter(e=>(Ae(e.address)||0)>0):"highBalance"===oe?a=a.filter(e=>(Ae(e.address)||0)>=.1):"lowBalance"===oe?a=a.filter(e=>(Ae(e.address)||0)<.1&&(Ae(e.address)||0)>0):"hasTokens"===oe&&(a=a.filter(e=>(Se(e.address)||0)>0))),a.sort((e,r)=>{if("address"===re)return"asc"===te?e.address.localeCompare(r.address):r.address.localeCompare(e.address);if("balance"===re){const a=Ae(e.address)||0,t=Ae(r.address)||0;return"asc"===te?a-t:t-a}if("tokenBalance"===re){const a=Se(e.address)||0,t=Se(r.address)||0;return"asc"===te?a-t:t-a}return 0})})(Oe(),Q).map((r,a)=>{return e.jsxs("div",{onClick:()=>(e=>{const r={privateKey:e.privateKey,address:e.address,displayName:C(e)};q(e=>[...e,r])})(r),className:"p-3 rounded-lg border cursor-pointer transition-all hover:bg-app-secondary "+(Ve(r.address)?"border-error-alt-40 bg-error-alt-99":"border-app-primary-40 bg-app-tertiary hover:border-app-primary"),children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"color-primary text-sm font-mono truncate",children:ke(r.address)}),e.jsxs("div",{className:"text-xs text-app-secondary-60 mt-1",children:["SOL: ",Ce(Ae(r.address)||0)]}),e.jsxs("div",{className:"text-xs text-app-secondary-60",children:["Tokens: ",(t=Se(r.address)||0,t.toFixed(6))]})]})}),Ve(r.address)&&e.jsx("div",{className:"text-xs text-error-alt mt-1",children:"Insufficient SOL for gas"})]},a);var t})})})]})]})]})]})}):null};export{U as default};
